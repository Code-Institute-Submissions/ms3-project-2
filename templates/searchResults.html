{% extends 'base.html'%} {% block content %}

<h1>Search results here</h1>

{% if parameter == "Not chosen" %}
        <!-- This allows the user to choose which parameters they will use to filter. -->
        <form method="POST" action="{{ url_for('search_report_parameter') }}">
        <select name="search_parameter" id="">
                <option value="" disabled selected></option>
                
                {% for search in search_parameter1 %}
                    <option>{{search}}</option>
                {% endfor %}
                
        </select> 
        
        {% for x in range(test) %}
            <select name="search_parameter{{x}}" id="">
                <option value="" disabled selected></option>
                
                {% for search in search_parameter1 %}
                    <option>{{search}}</option>
                {% endfor %}
                </select>            
        {% endfor %}
        <button type="submit">Search</button>
    </form>

{% endif %}

<!-- Change this eventually to the count of the types in search_parameters -->

<!-- This is the part of the code that produces the correct values when the parameters have been chosen. -->
{% if test < 9 %}
<a class="btn" href="{{url_for('adding_search_parameter')}}">Add more than one search field</a>
{% endif %}

{% if parameter != "Not chosen" %}

<form method="POST" action="{{ url_for('retrieving_report', parameter='{{parameter}}') }}">

    {% for x in range(-1,test) %}
    <label for="search_choice">{{parameter.capitalize()}}</label>
    <input type="text" class="hidden" value="{{parameter}}" name="search_choice" id="search_choice">
    <select name="search_value" id="">
        {% if parameter == "username" %}
            <option disabled></option>
            {% for user in username|sort %}
                <option>{{user}}</option>
            {% endfor %}
        {% endif %}
        
        {% if parameter == "category_name" %}
            <option disabled></option>
            {% for category in category|sort %}
                <option>{{category}}</option>
            {% endfor %}
        {% endif %}
        
        {% if parameter == "incident_description" %}
            <option disabled></option>
            {% for incident in incident_description|sort %}
                <option>{{incident}}</option>
            {% endfor %}
        {% endif %}

        {% if parameter == "sub_category" %}
            <option disabled></option>
            {% for sub in sub_category |sort %}
                <option>{{sub}}</option>
            {% endfor %}
        {% endif %}
        
        {% if parameter == "building" %}
            <option disabled></option>
            {% for building in building|sort %}
                <option>{{building}}</option>
            {% endfor %}
        {% endif %}

        {% if parameter == "street" %}
            <option disabled></option>
            {% for street in street|sort %}
                <option>{{street}}</option>
            {% endfor %}
        {% endif %}
        
        {% if parameter == "city" %}
        <option selected disabled value=""></option>
            {% for city in city|sort %}
                <option>{{city}}</option>
            {% endfor %}
        {% endif %}

        {% if parameter == "county" %}
            <option disabled></option>
            {% for county in county|sort %}
                <option>{{county}}</option>
            {% endfor %}
        {% endif %}

        {% if parameter == "postcode" %}
            <option disabled></option>
            {% for postcode in postcode|sort %}
                <option>{{postcode}}</option>
            {% endfor %}
        {% endif %}

        {% if parameter == "reported" %}
            <option disabled></option>
            {% for reported in reported_to_authories|sort %}
                <option>{{reported}}</option>
            {% endfor %}
        {% endif %}

    </select>
    {% endfor %}




    <button type="submit">Search</button>
</form>
{% endif %}





{% endblock %}